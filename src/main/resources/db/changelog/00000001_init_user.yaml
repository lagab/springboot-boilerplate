databaseChangeLog:
  - changeSet:
      id: 1593766930040-4/init-authority-table
      author: lagab (generated)
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: app_authorityPK
                  name: name
                  type: VARCHAR(50)
            tableName: authority
        - loadData:
            file:  db/changelog/data/user/authorities.csv
            encoding:  UTF-8
            separator:  ;
            tableName:  authority
  - changeSet:
      id: 1593766930040-5/init-user-table
      author: lagab (generated)
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: app_userPK
                  name: id
                  type: BIGINT
              - column:
                  constraints:
                    nullable: false
                  name: created_by
                  type: VARCHAR(50)
              - column:
                  name: created_date
                  type: timestamp
              - column:
                  name: last_modified_by
                  type: VARCHAR(50)
              - column:
                  name: last_modified_date
                  type: timestamp
              - column:
                  constraints:
                    nullable: false
                  name: activated
                  type: BIT
              - column:
                  name: activation_key
                  type: VARCHAR(20)
              - column:
                  name: email
                  type: VARCHAR(254)
              - column:
                  name: first_name
                  type: VARCHAR(50)
              - column:
                  name: image_url
                  type: VARCHAR(256)
              - column:
                  name: lang_key
                  type: VARCHAR(10)
              - column:
                  name: last_name
                  type: VARCHAR(50)
              - column:
                  constraints:
                    nullable: false
                  name: login
                  type: VARCHAR(50)
              - column:
                  constraints:
                    nullable: false
                  name: password_hash
                  type: VARCHAR(60)
              - column:
                  name: reset_date
                  type: timestamp
              - column:
                  name: reset_key
                  type: VARCHAR(20)
            tableName: user
        - loadData:
            file:  db/changelog/data/user/users.csv
            encoding:  UTF-8
            separator:  ;
            tableName:  user
            columns:
              - column:
                  name:  activated
                  type:  boolean
              - column:
                  name:  created_date
                  type:  timestamp
  - changeSet:
      id: 1593766930040-6/init-user-authorities-table
      author: lagab (generated)
      changes:
        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: user_id
                  type: BIGINT
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                  name: authority_name
                  type: VARCHAR(50)
            tableName: user_authority
        - loadData:
            file:  db/changelog/data/user/users_authorities.csv
            encoding:  UTF-8
            separator:  ;
            tableName:  user_authority
  - changeSet:
      id: 1593766930040-7/unique-email
      author: lagab (generated)
      changes:
        - addUniqueConstraint:
            columnNames: email
            constraintName: UC_APP_USEREMAIL_COL
            tableName: user
  - changeSet:
      id: 1593766930040-8/unique-login
      author: lagab (generated)
      changes:
        - addUniqueConstraint:
            columnNames: login
            constraintName: UC_APP_USERLOGIN_COL
            tableName: user
  - changeSet:
      id: 1593766930040-9
      author: lagab (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: user_id
            baseTableName: user_authority
            constraintName: FKfocpjrj1tmhlu9vcfo47nqanp
            deferrable: false
            initiallyDeferred: false
            referencedColumnNames: id
            referencedTableName: user
            validate: true
  - changeSet:
      id: 1593766930040-10
      author: lagab (generated)
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: authority_name
            baseTableName: user_authority
            constraintName: FKi2mlqu6q3ct0fy19j1c83sym3
            deferrable: false
            initiallyDeferred: false
            referencedColumnNames: name
            referencedTableName: authority
            validate: true